<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>1% Better. Every Day.</title>

<!-- App Icons -->
<link rel="apple-touch-icon" href="icons/icon-180.png" />
<link rel="icon" sizes="192x192" href="icons/icon-192.png" />
<link rel="icon" sizes="512x512" href="icons/icon-512.png" />

<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    margin: 0;
    padding: 0;
    background: #e9f3ec;
    color: #0f1e13;
  }

  header {
    background: linear-gradient(180deg, #3a6f52, #244b38);
    color: #fff;
    padding: 22px;
    text-align: center;
  }

  header h1 {
    margin: 0;
    font-size: 26px;
    font-weight: 700;
  }

  .logo {
    font-size: 38px;
    margin-bottom: 6px;
  }

  .nav {
    display: flex;
    justify-content: space-around;
    background: #dfe7e3;
    padding: 10px 0;
    position: fixed;
    bottom: 0;
    width: 100%;
    border-top: 1px solid #cfd7d2;
  }

  .nav button {
    background: none;
    border: none;
    font-size: 15px;
    padding: 6px 10px;
    color: #213b2d;
  }

  .page {
    display: none;
    padding: 15px;
    padding-bottom: 70px;
  }

  .active {
    display: block;
  }

  .card {
    background: #ffffff;
    border-radius: 14px;
    padding: 15px;
    margin: 10px 0;
    box-shadow: 0 1px 4px rgba(0,0,0,0.12);
  }

  .section-title {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 8px;
  }

  .quote {
    font-size: 17px;
    font-style: italic;
    margin-top: 6px;
  }

  .group-label {
    font-size: 15px;
    font-weight: 700;
    margin-top: 12px;
    padding-left: 4px;
    color: #244b38;
  }

  .focus-area {
    background: #ffffff;
    padding: 12px;
    margin: 8px 0;
    border-radius: 10px;
    cursor: pointer;
    font-size: 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .sub-list {
    padding-left: 18px;
    display: none;
  }

  .sub-list.open {
    display: block;
  }

  .sub {
    margin: 8px 0;
    padding-left: 10px;
    font-size: 15px;
  }

  .task {
    display: flex;
    align-items: center;
    background: #f0f4f2;
    padding: 8px 10px;
    border-radius: 8px;
    margin-top: 6px;
    justify-content: space-between;
  }

  .check {
    width: 20px;
    height: 20px;
  }

  .trash {
    cursor: pointer;
    font-size: 14px;
    margin-left: 10px;
  }

  .add-btn {
    font-size: 13px;
    padding: 6px 10px;
    margin-top: 6px;
    border-radius: 8px;
    background: #3a6f52;
    border: none;
    color: #fff;
  }
</style>
</head>

<body>
<header>
  <div class="logo">üåÖ</div>
  <h1>1% Better. Every Day.</h1>
</header>

<div id="home" class="page active">
  <div class="card">
    <div class="section-title">This Week At A Glance</div>
    <div id="weekProgress">Loading...</div>
  </div>

  <div class="card">
    <div class="section-title">Inspirational Quote</div>
    <div id="quoteText" class="quote">Loading inspirational quote...</div>
  </div>

  <div class="card">
    <div class="section-title">Next Up üî•</div>
    <div id="nextUpList">Loading...</div>
  </div>
</div>

<div id="areas" class="page">
  <div class="card">
    <div class="section-title">Focus Areas</div>

    <div id="focusAreaGroups"></div>
  </div>
</div>

<div id="checkin" class="page">
  <div class="card">
    <div class="section-title">Today‚Äôs Intention</div>
    <textarea id="intentionInput" placeholder="What‚Äôs your intention today?" style="width:100%;height:60px;border-radius:10px;padding:10px;border:1px solid #ccc;"></textarea>
    <button class="add-btn" onclick="saveIntention()">Save</button>
  </div>

  <div class="card">
    <div class="section-title">Reflection</div>
    <textarea id="reflectionInput" placeholder="What did you learn or feel today?" style="width:100%;height:90px;border-radius:10px;padding:10px;border:1px solid #ccc;"></textarea>
    <button class="add-btn" onclick="saveReflection()">Save</button>
  </div>
</div>

<div id="stats" class="page">
  <div class="card">
    <div class="section-title">Weekly Progress</div>
    <div id="weeklyStats">Loading...</div>
  </div>

  <div class="card">
    <div class="section-title">Streaks</div>
    <div id="streakList">Loading...</div>
  </div>
</div>

<!-- Bottom Navigation -->
<div class="nav">
  <button onclick="showPage('home')">Home</button>
  <button onclick="showPage('areas')">Areas</button>
  <button onclick="showPage('checkin')">Check-In</button>
  <button onclick="showPage('stats')">Stats</button>
</div>

<script>
// Navigation Switching
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* --------------------------------
   DATA & STORAGE
---------------------------------- */

const defaultData = {
  groups: {
    "Health & Body": {
      "üí™ Shoulder": ["Mobility", "Strength", "PT Recovery"],
      "ü•ó Diet": ["Nutrition", "Fasting", "Hydration"],
      "üèãÔ∏è Exercise": ["Strength Training", "Cardio", "Stretch & Core"]
    },
    "Passion & Joy": {
      "üíÉ Dance": ["Salsa Basics", "Footwork", "Practice Sessions"],
      "üé∂ Soundbath": ["Handpan Practice", "Event Prep", "Sound Healing Study"],
      "üéÆ Anya‚Äôs Creativity Zone": ["Filming", "Editing", "Room Setup & Gear"]
    },
    "Inner Growth": {
      "üßò Wellness": ["Meditation", "Sauna / Cold Plunge", "Sleep Optimization"]
    },
    "Career & Work": {
      "üèóÔ∏è Ciqu": ["CFO Workflow", "Vendor Management", "Project Oversight"],
      "üõ†Ô∏è EZ Tool": ["App Development", "Inventory", "Marketing"]
    }
  },
  tasks: {},
  completed: {},
  intention: "",
  reflection: ""
};

function loadData() {
  let data = JSON.parse(localStorage.getItem("onePercentData"));
  if (!data || !data.groups) {
    data = defaultData;
    saveData(data);
  }
  return data;
}

function saveData(d) {
  localStorage.setItem("onePercentData", JSON.stringify(d));
}

/* --------------------------------
   QUOTE LOADING
---------------------------------- */

async function loadQuote() {
  const res = await fetch("https://api.quotable.io/random");
  const q = await res.json();
  document.getElementById("quoteText").textContent = `"${q.content}" ‚Äì ${q.author}`;
}

/* --------------------------------
   INTENTION & REFLECTION SAVE
---------------------------------- */

function saveIntention() {
  data.intention = document.getElementById("intentionInput").value;
  saveData(data);
}

function saveReflection() {
  data.reflection = document.getElementById("reflectionInput").value;
  saveData(data);
}

/* --------------------------------
   RENDER FOCUS AREAS
---------------------------------- */

function renderFocusAreas() {
  const container = document.getElementById("focusAreaGroups");
  container.innerHTML = "";

  Object.keys(data.groups).forEach(group => {
    const div = document.createElement("div");
    div.innerHTML = `<div class="group-label">${group}</div>`;
    container.appendChild(div);

    const areas = data.groups[group];
    Object.keys(areas).forEach(area => {
      const areaDiv = document.createElement("div");
      areaDiv.className = "focus-area";
      areaDiv.innerHTML = `${area} <span>‚ñº</span>`;
      areaDiv.onclick = () => toggleSub(areaDiv, area);
      container.appendChild(areaDiv);

      const subContainer = document.createElement("div");
      subContainer.className = "sub-list";
      areas[area].forEach(sub => renderSub(subContainer, area, sub));
      container.appendChild(subContainer);
    });
  });
}

function toggleSub(el, area) {
  const next = el.nextElementSibling;
  next.classList.toggle("open");
}

function renderSub(parent, area, sub) {
  const div = document.createElement("div");
  div.className = "sub";
  div.textContent = sub;
  parent.appendChild(div);

  const tasksArea = document.createElement("div");
  parent.appendChild(tasksArea);

  renderTasks(area, sub, tasksArea);

  const addBtn = document.createElement("button");
  addBtn.className = "add-btn";
  addBtn.textContent = "Add Task";
  addBtn.onclick = () => addTask(area, sub);
  parent.appendChild(addBtn);
}

/* --------------------------------
   TASK MANAGEMENT
---------------------------------- */

function renderTasks(area, sub, container) {
  container.innerHTML = "";
  const list = data.tasks[`${area}-${sub}`] || [];
  list.forEach((task, i) => {
    const row = document.createElement("div");
    row.className = "task";
    row.innerHTML = `
      <span>${task}</span>
      <span class="trash" onclick="deleteTask('${area}','${sub}',${i})">üóëÔ∏è</span>
    `;
    container.appendChild(row);
  });
}

function addTask(area, sub) {
  const name = prompt("Task name?");
  if (!name) return;
  const key = `${area}-${sub}`;
  if (!data.tasks[key]) data.tasks[key] = [];
  data.tasks[key].push(name);
  saveData(data);
  renderFocusAreas();
}

function deleteTask(area, sub, i) {
  const key = `${area}-${sub}`;
  data.tasks[key].splice(i, 1);
  saveData(data);
  renderFocusAreas();
}

/* --------------------------------
   NEXT UP (Smart Recommendations)
---------------------------------- */

function renderNextUp() {
  const list = document.getElementById("nextUpList");
  list.innerHTML = "";

  let allTasks = [];
  Object.keys(data.tasks).forEach(key => {
    data.tasks[key].forEach(task => {
      allTasks.push(task);
    });
  });

  if (allTasks.length === 0) {
    list.textContent = "Add tasks to get recommendations.";
    return;
  }

  allTasks.slice(0,5).forEach(t => {
    const div = document.createElement("div");
    div.className = "task";
    div.innerHTML = `${t}`;
    list.appendChild(div);
  });
}

/* --------------------------------
   WEEK DISPLAY (Placeholder)
---------------------------------- */
function updateWeek() {
  document.getElementById("weekProgress").textContent = "Weekly tracking coming soon";
}

/* --------------------------------
   INIT APP
---------------------------------- */

let data = loadData();
renderFocusAreas();
renderNextUp();
updateWeek();
loadQuote();
</script>
</body>
</html>
